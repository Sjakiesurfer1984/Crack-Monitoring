import{c as z,r as i,bO as H,A as P,cY as x,j as s,bY as D,bZ as E,cb as M,b_ as U,bH as _,cZ as B}from"./index-OxGwEg3m.js";import{u as L}from"./uniqueId-Dka3DuQQ.js";import{u as O,a as A,b as Y}from"./useOnInputChange-C3lvbUNp.js";import{a as Z}from"./useBasicWidgetState-Bm5AJWX7.js";import{I as G}from"./InputInstructions-DuxSO2sS.js";import{I as K}from"./input-CkptI290.js";import"./inputUtils-CQWz5UKz.js";import"./FormClearHelper-DxeY-rII.js";import"./base-input-NsRtpzFx.js";const N=z("div",{target:"e11y4ecf0"})({name:"bjn8wh",styles:"position:relative"});function q({disabled:t,element:e,widgetMgr:r,fragmentId:d}){var g;const[l,u]=i.useState(()=>S(r,e)??null),[W,y]=H(),[o,m]=i.useState(!1),I=i.useCallback(()=>{u(e.default??null),m(!0)},[e.default]),[v,p]=Z({getStateFromWidgetMgr:S,getDefaultStateFromProto:J,getCurrStateFromProto:Q,updateWidgetMgrState:X,element:e,widgetMgr:r,fragmentId:d,onFormCleared:I});O(v,l,u,o);const[C,b]=i.useState(!1),a=P(),[h]=i.useState(()=>L("text_input_")),{placeholder:T,formId:n,maxChars:f}=e,c=i.useCallback(()=>{m(!1),p({value:l,fromUi:!0})},[l,p]),j=x({formId:n})?r.allowFormEnterToSubmit(n):o,F=C&&W>a.breakpoints.hideWidgetDetails,w=i.useCallback(()=>{o&&c(),b(!1)},[o,c]),R=i.useCallback(()=>{b(!0)},[]),V=A({formId:n,maxChars:f,setDirty:m,setUiValue:u,setValueWithSource:p}),k=Y(n,c,o,r,d);return s.jsxs(N,{className:"stTextInput","data-testid":"stTextInput",ref:y,children:[s.jsx(D,{label:e.label,disabled:t,labelVisibility:E((g=e.labelVisibility)==null?void 0:g.value),htmlFor:h,children:e.help&&s.jsx(M,{children:s.jsx(U,{content:e.help,placement:_.TOP_RIGHT})})}),s.jsx(K,{value:l??"",placeholder:T,onBlur:w,onFocus:R,onChange:V,onKeyPress:k,"aria-label":e.label,disabled:t,id:h,type:$(e),autoComplete:e.autocomplete,overrides:{Input:{style:{minWidth:0,"::placeholder":{opacity:"0.7"},lineHeight:a.lineHeights.inputWidget,paddingRight:a.spacing.sm,paddingLeft:a.spacing.md,paddingBottom:a.spacing.sm,paddingTop:a.spacing.sm}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:a.sizes.minElementHeight,borderLeftWidth:a.sizes.borderWidth,borderRightWidth:a.sizes.borderWidth,borderTopWidth:a.sizes.borderWidth,borderBottomWidth:a.sizes.borderWidth}}}}),F&&s.jsx(G,{dirty:o,value:l??"",maxLength:f,inForm:x({formId:n}),allowEnterToSubmit:j})]})}function S(t,e){return t.getStringValue(e)??null}function J(t){return t.default??null}function Q(t){return t.value??null}function X(t,e,r,d){e.setStringValue(t,r.value,{fromUi:r.fromUi},d)}function $(t){return t.type===B.Type.PASSWORD?"password":"text"}const ee=i.memo(q);export{ee as default};
