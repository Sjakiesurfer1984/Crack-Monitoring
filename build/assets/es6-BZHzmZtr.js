const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/downloader-CaOAUbUF.js","assets/index-OxGwEg3m.js","assets/index.5L7agjmb.css","assets/sandbox-VVt-VWM8.js","assets/memory-BDEJOdDh.js"])))=>i.map(i=>d[i]);
import{z as c,__tla as me}from"./index-OxGwEg3m.js";let B,A,H,pe=Promise.all([(()=>{try{return me}catch{}})()]).then(async()=>{var $=Object.defineProperty,L=r=>{throw TypeError(r)},Y=(r,e,t)=>e in r?$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,g=(r,e,t)=>Y(r,typeof e!="symbol"?e+"":e,t),X=(r,e,t)=>e.has(r)||L("Cannot "+t),J=(r,e,t)=>e.has(r)?L("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),K=(r,e,t,n)=>(X(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);const x=globalThis.showDirectoryPicker;async function Q(r={}){if(x&&!r._preferPolyfill)return x(r);const e=document.createElement("input");e.type="file",e.webkitdirectory=!0,e.multiple=!0,e.style.position="fixed",e.style.top="-100000px",e.style.left="-100000px",document.body.appendChild(e);const t=c(()=>Promise.resolve().then(()=>q),void 0);return await new Promise(n=>{e.addEventListener("change",n),e.click()}),t.then(n=>n.getDirHandlesFromInput(e))}const Z={accepts:[]},R=globalThis.showOpenFilePicker;async function ee(r={}){const e={...Z,...r};if(R&&!r._preferPolyfill)return R(e);const t=document.createElement("input");t.type="file",t.multiple=e.multiple,t.accept=(e.accepts||[]).map(s=>[...(s.extensions||[]).map(i=>"."+i),...s.mimeTypes||[]]).flat().join(","),Object.assign(t.style,{position:"fixed",top:"-100000px",left:"-100000px"}),document.body.appendChild(t);const n=c(()=>Promise.resolve().then(()=>q),void 0);return await new Promise(s=>{t.addEventListener("change",s,{once:!0}),t.click()}),t.remove(),n.then(s=>s.getFileHandlesFromInput(t))}const M=globalThis.showSaveFilePicker;async function te(r={}){if(M&&!r._preferPolyfill)return M(r);r._name&&(console.warn("deprecated _name, spec now have `suggestedName`"),r.suggestedName=r._name);const{FileSystemFileHandle:e}=await c(async()=>{const{FileSystemFileHandle:n}=await Promise.resolve().then(()=>u);return{FileSystemFileHandle:n}},void 0),{FileHandle:t}=await c(async()=>{const{FileHandle:n}=await import("./downloader-CaOAUbUF.js");return{FileHandle:n}},__vite__mapDeps([0,1,2]));return new e(new t(r.suggestedName))}globalThis.DataTransferItem&&!DataTransferItem.prototype.getAsFileSystemHandle&&(DataTransferItem.prototype.getAsFileSystemHandle=async function(){const r=this.webkitGetAsEntry(),[{FileHandle:e,FolderHandle:t},{FileSystemDirectoryHandle:n},{FileSystemFileHandle:s}]=await Promise.all([c(()=>import("./sandbox-VVt-VWM8.js"),__vite__mapDeps([3,1,2])),c(()=>Promise.resolve().then(()=>T),void 0),c(()=>Promise.resolve().then(()=>u),void 0)]);return r.isFile?new s(new e(r,!1)):new n(new t(r,!1))});async function re(r,e={}){var t,n;if(!r)return((n=(t=globalThis.navigator)==null?void 0:t.storage)==null?void 0:n.getDirectory())||globalThis.getOriginPrivateDirectory();const{FileSystemDirectoryHandle:s}=await c(async()=>{const{FileSystemDirectoryHandle:y}=await Promise.resolve().then(()=>T);return{FileSystemDirectoryHandle:y}},void 0),i=await r,l=await(i.default?i.default(e):i(e));return new s(l)}let j;A={WritableStream:globalThis.WritableStream,TransformStream:globalThis.TransformStream,DOMException:globalThis.DOMException,Blob:globalThis.Blob,File:globalThis.File},{WritableStream:j}=A;var O;const ae=class G extends j{constructor(e){super(e),J(this,O),K(this,O,e),Object.setPrototypeOf(this,G.prototype),this._closed=!1}async close(){this._closed=!0;const e=this.getWriter(),t=e.close();return e.releaseLock(),t}seek(e){return this.write({type:"seek",position:e})}truncate(e){return this.write({type:"truncate",size:e})}write(e){if(this._closed)return Promise.reject(new TypeError("Cannot write to a CLOSED writable stream"));const t=this.getWriter(),n=t.write(e);return t.releaseLock(),n}};O=new WeakMap;let b=ae;Object.defineProperty(b.prototype,Symbol.toStringTag,{value:"FileSystemWritableFileStream",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(b.prototype,{close:{enumerable:!0},seek:{enumerable:!0},truncate:{enumerable:!0},write:{enumerable:!0}}),globalThis.FileSystemFileHandle&&!globalThis.FileSystemFileHandle.prototype.createWritable&&!globalThis.FileSystemWritableFileStream&&(globalThis.FileSystemWritableFileStream=b);const m=Symbol("adapter");var W;W=m;class v{constructor(e){g(this,W),g(this,"name"),g(this,"kind"),this.kind=e.kind,this.name=e.name,this[m]=e}async queryPermission(e={}){const{mode:t="read"}=e,n=this[m];if(n.queryPermission)return n.queryPermission({mode:t});if(t==="read")return"granted";if(t==="readwrite")return n.writable?"granted":"denied";throw new TypeError(`Mode ${t} must be 'read' or 'readwrite'`)}async requestPermission({mode:e="read"}={}){const t=this[m];if(t.requestPermission)return t.requestPermission({mode:e});if(e==="read")return"granted";if(e==="readwrite")return t.writable?"granted":"denied";throw new TypeError(`Mode ${e} must be 'read' or 'readwrite'`)}async remove(e={}){await this[m].remove(e)}async isSameEntry(e){return this===e?!0:!e||typeof e!="object"||this.kind!==e.kind||!e[m]?!1:this[m].isSameEntry(e[m])}}Object.defineProperty(v.prototype,Symbol.toStringTag,{value:"FileSystemHandle",writable:!1,enumerable:!1,configurable:!0});var N;globalThis.FileSystemHandle&&((N=globalThis.FileSystemHandle.prototype).queryPermission??(N.queryPermission=function(r){return"granted"}));let V;H={INVALID:["seeking position failed.","InvalidStateError"],GONE:["A requested file or directory could not be found at the time an operation was processed.","NotFoundError"],MISMATCH:["The path supplied exists, but was not an entry of requested type.","TypeMismatchError"],MOD_ERR:["The object can not be modified in this way.","InvalidModificationError"],SYNTAX:r=>[`Failed to execute 'write' on 'UnderlyingSinkBase': Invalid params passed. ${r}`,"SyntaxError"],SECURITY:["It was determined that certain files are unsafe for access within a Web application, or that too many calls are being made on file resources.","SecurityError"],DISALLOWED:["The request is not allowed by the user agent or the platform in the current context.","NotAllowedError"]},V={writable:globalThis.WritableStream};async function ne(r){console.warn("deprecated fromDataTransfer - use `dt.items[0].getAsFileSystemHandle()` instead");const[e,t,n]=await Promise.all([c(()=>import("./memory-BDEJOdDh.js"),__vite__mapDeps([4,1,2])),c(()=>import("./sandbox-VVt-VWM8.js"),__vite__mapDeps([3,1,2])),c(()=>Promise.resolve().then(()=>T),void 0)]),s=new e.FolderHandle("",!1);return s._entries=r.map(i=>i.isFile?new t.FileHandle(i,!1):new t.FolderHandle(i,!1)),new n.FileSystemDirectoryHandle(s)}async function ie(r){const{FolderHandle:e,FileHandle:t}=await c(async()=>{const{FolderHandle:y,FileHandle:o}=await import("./memory-BDEJOdDh.js");return{FolderHandle:y,FileHandle:o}},__vite__mapDeps([4,1,2])),{FileSystemDirectoryHandle:n}=await c(async()=>{const{FileSystemDirectoryHandle:y}=await Promise.resolve().then(()=>T);return{FileSystemDirectoryHandle:y}},void 0),s=Array.from(r.files),i=s[0].webkitRelativePath.split("/",1)[0],l=new e(i,!1);return s.forEach(y=>{const o=y.webkitRelativePath.split("/");o.shift();const d=o.pop(),w=o.reduce((h,f)=>(h._entries[f]||(h._entries[f]=new e(f,!1)),h._entries[f]),l);w._entries[d]=new t(y.name,y,!1)}),new n(l)}async function se(r){const{FileHandle:e}=await c(async()=>{const{FileHandle:n}=await import("./memory-BDEJOdDh.js");return{FileHandle:n}},__vite__mapDeps([4,1,2])),{FileSystemFileHandle:t}=await c(async()=>{const{FileSystemFileHandle:n}=await Promise.resolve().then(()=>u);return{FileSystemFileHandle:n}},void 0);return Array.from(r.files).map(n=>new t(new e(n.name,n,!1)))}const q=Object.freeze(Object.defineProperty({__proto__:null,config:V,errors:H,fromDataTransfer:ne,getDirHandlesFromInput:ie,getFileHandlesFromInput:se},Symbol.toStringTag,{value:"Module"})),{GONE:oe,MOD_ERR:le}=H,p=Symbol("adapter");var z;let _=class D extends v{constructor(e){super(e),g(this,z),this[p]=e}async getDirectoryHandle(e,t={}){if(e==="")throw new TypeError("Name can't be an empty string.");if(e==="."||e===".."||e.includes("/"))throw new TypeError("Name contains invalid characters.");t.create=!!t.create;const n=await this[p].getDirectoryHandle(e,t);return new D(n)}async*entries(){const{FileSystemFileHandle:e}=await c(async()=>{const{FileSystemFileHandle:t}=await Promise.resolve().then(()=>u);return{FileSystemFileHandle:t}},void 0);for await(const[t,n]of this[p].entries())yield[n.name,n.kind==="file"?new e(n):new D(n)]}async*getEntries(){const{FileSystemFileHandle:e}=await c(async()=>{const{FileSystemFileHandle:t}=await Promise.resolve().then(()=>u);return{FileSystemFileHandle:t}},void 0);console.warn("deprecated, use .entries() instead");for await(let t of this[p].entries())yield t.kind==="file"?new e(t):new D(t)}async getFileHandle(e,t={}){const{FileSystemFileHandle:n}=await c(async()=>{const{FileSystemFileHandle:i}=await Promise.resolve().then(()=>u);return{FileSystemFileHandle:i}},void 0);if(e==="")throw new TypeError("Name can't be an empty string.");if(e==="."||e===".."||e.includes("/"))throw new TypeError("Name contains invalid characters.");t.create=!!t.create;const s=await this[p].getFileHandle(e,t);return new n(s)}async removeEntry(e,t={}){if(e==="")throw new TypeError("Name can't be an empty string.");if(e==="."||e===".."||e.includes("/"))throw new TypeError("Name contains invalid characters.");return t.recursive=!!t.recursive,this[p].removeEntry(e,t)}async resolve(e){if(await e.isSameEntry(this))return[];const t=[{handle:this,path:[]}];for(;t.length;){let{handle:n,path:s}=t.pop();for await(const i of n.values()){if(await i.isSameEntry(e))return[...s,i.name];i.kind==="directory"&&t.push({handle:i,path:[...s,i.name]})}}return null}async*keys(){for await(const[e]of this[p].entries())yield e}async*values(){for await(const[e,t]of this)yield t}[(z=p,Symbol.asyncIterator)](){return this.entries()}};if(Object.defineProperty(_.prototype,Symbol.toStringTag,{value:"FileSystemDirectoryHandle",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(_.prototype,{getDirectoryHandle:{enumerable:!0},entries:{enumerable:!0},getFileHandle:{enumerable:!0},removeEntry:{enumerable:!0}}),globalThis.FileSystemDirectoryHandle){const r=globalThis.FileSystemDirectoryHandle.prototype;r.resolve=async function(s){if(await s.isSameEntry(this))return[];const i=[{handle:this,path:[]}];for(;i.length;){let{handle:l,path:y}=i.pop();for await(const o of l.values()){if(await o.isSameEntry(s))return[...y,o.name];o.kind==="directory"&&i.push({handle:o,path:[...y,o.name]})}}return null};async function e(s){if(await(await navigator.storage.getDirectory()).resolve(s)===null)throw new DOMException(...oe)}const t=r.entries;r.entries=async function*(){await e(this),yield*t.call(this)},r[Symbol.asyncIterator]=async function*(){yield*this.entries()};const n=r.removeEntry;r.removeEntry=async function(s,i={}){return n.call(this,s,i).catch(async l=>{throw l instanceof DOMException&&l.name==="UnknownError"&&!i.recursive&&!(await t.call(this).next()).done?new DOMException(...le):l})}}const T=Object.freeze(Object.defineProperty({__proto__:null,FileSystemDirectoryHandle:_,default:_},Symbol.toStringTag,{value:"Module"})),{INVALID:ce,SYNTAX:k,GONE:ye}=H,P=Symbol("adapter");var U,C;class F extends(C=v,U=P,C){constructor(e){super(e),g(this,U),this[P]=e}async createWritable(e={}){return new b(await this[P].createWritable(e))}async getFile(){return this[P].getFile()}}if(Object.defineProperty(F.prototype,Symbol.toStringTag,{value:"FileSystemFileHandle",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(F.prototype,{createWritable:{enumerable:!0},getFile:{enumerable:!0}}),globalThis.FileSystemFileHandle&&!globalThis.FileSystemFileHandle.prototype.createWritable){const r=new WeakMap;let e;const t=()=>{let s,i;onmessage=async l=>{const y=l.ports[0],o=l.data;switch(o.type){case"open":const d=o.name;let w=await navigator.storage.getDirectory();for(const h of o.path)w=await w.getDirectoryHandle(h);s=await w.getFileHandle(d),i=await s.createSyncAccessHandle();break;case"write":i.write(o.data,{at:o.position}),i.flush();break;case"truncate":i.truncate(o.size);break;case"abort":case"close":i.close();break}y.postMessage(0)}};globalThis.FileSystemFileHandle.prototype.createWritable=async function(s){if(!e){const a=`(${t.toString()})()`,S=new Blob([a],{type:"text/javascript"});e=URL.createObjectURL(S)}const i=new Worker(e,{type:"module"});let l=0;const y=new TextEncoder;let o=await this.getFile().then(a=>a.size);const d=a=>new Promise((S,de)=>{const E=new MessageChannel;E.port1.onmessage=I=>{I.data instanceof Error?de(I.data):S(I.data),E.port1.close(),E.port2.close(),E.port1.onmessage=null},i.postMessage(a,[E.port2])}),w=await navigator.storage.getDirectory(),h=await r.get(this),f=await w.resolve(h);if(f===null)throw new DOMException(...ye);return await d({type:"open",path:f,name:this.name}),(s==null?void 0:s.keepExistingData)===!1&&(await d({type:"truncate",size:0}),o=0),new b({start:a=>{},async write(a){if((a==null?void 0:a.constructor)===Object?a={...a}:a={type:"write",data:a,position:l},a.type==="write"){if(!("data"in a))throw await d({type:"close"}),new DOMException(...k("write requires a data argument"));if(a.position??(a.position=l),typeof a.data=="string")a.data=y.encode(a.data);else if(a.data instanceof ArrayBuffer)a.data=new Uint8Array(a.data);else if(!(a.data instanceof Uint8Array)&&ArrayBuffer.isView(a.data))a.data=new Uint8Array(a.data.buffer,a.data.byteOffset,a.data.byteLength);else if(!(a.data instanceof Uint8Array)){const S=await new Response(a.data).arrayBuffer();a.data=new Uint8Array(S)}Number.isInteger(a.position)&&a.position>=0&&(l=a.position),l+=a.data.byteLength,o+=a.data.byteLength}else if(a.type==="seek")if(Number.isInteger(a.position)&&a.position>=0){if(o<a.position)throw new DOMException(...ce);console.log("seeking",a),l=a.position;return}else throw await d({type:"close"}),new DOMException(...k("seek requires a position argument"));else if(a.type==="truncate")if(Number.isInteger(a.size)&&a.size>=0)o=a.size,l>o&&(l=o);else throw await d({type:"close"}),new DOMException(...k("truncate requires a size argument"));await d(a)},async close(){await d({type:"close"}),i.terminate()},async abort(a){await d({type:"abort",reason:a}),i.terminate()}})};const n=FileSystemDirectoryHandle.prototype.getFileHandle;FileSystemDirectoryHandle.prototype.getFileHandle=async function(...s){const i=await n.call(this,...s);return r.set(i,this),i}}let u;u=Object.freeze(Object.defineProperty({__proto__:null,FileSystemFileHandle:F,default:F},Symbol.toStringTag,{value:"Module"})),B=Object.freeze(Object.defineProperty({__proto__:null,FileSystemDirectoryHandle:_,FileSystemFileHandle:F,FileSystemHandle:v,FileSystemWritableFileStream:b,getOriginPrivateDirectory:re,showDirectoryPicker:Q,showOpenFilePicker:ee,showSaveFilePicker:te},Symbol.toStringTag,{value:"Module"}))});export{pe as __tla,B as a,A as c,H as e};
